<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>[java Series] 24 Junit | newkayak12.github.io</title>
	<meta name="description"
		content="from Dictionary - JUnit">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- CSS -->
	<link rel="stylesheet" href="/assets/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="/java/2024/05/18/java-series-24-Junit.html">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="newkayak12.github.io"
		href="/feed.xml" />

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
		integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet"
		type="text/css">
	

	<!-- KaTeX -->
	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css"
		integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">

	<script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js"
		integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ"
		crossorigin="anonymous"></script>
	

	<!-- Google Analytics -->
	
</head>
  <body>
    <header class="site-header">
	<div class="branding">
		
		<a href="/">
			<img class="avatar" src="/assets/img/avatar.jpeg" alt=""/>
		</a>
		
		<h1 class="site-title">
			<a href="/">newkayak12.github.io</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			
			
			
			
			
			<li>
				<a class="page-link" href="/about/">
					About
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<!-- Social icons from Font Awesome, if enabled  -->
			


<li>
	<a href="mailto:newkayak12@gmail.com" title="Email">
		<i class="fas fa-fw fa-envelope"></i>
	</a>
</li>













<li>
	<a href="https://github.com/newkayak12" title="Follow on GitHub">
		<i class="fab fa-fw fa-github"></i>
	</a>
</li>































            <!-- Search bar -->
            
		</ul>
	</nav>

</header>

    <div class="content">
      <article >
  <header style="background-image: url('/')">
    <h1 class="title">[java Series] 24 Junit</h1>
    
    <p class="meta">
      May 18, 2024
      
    </p>
  </header>
  <section class="post-content"><p>from <a href="https://github.com/newkayak12/Dictionary/blob/master/java/24.Junit.md">Dictionary - JUnit</a></p>

<h1 id="junit">Junit</h1>

<h2 id="annotation">Annotation</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Annotation</th>
      <th style="text-align: center">Description</th>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">@Test</td>
      <td style="text-align: center">메소드가 테스트 메소드임을 나타낸다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@ParameterizedTest</td>
      <td style="text-align: center">매개변수가 있는 테스트임을 나타낸다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@ValueSource</td>
      <td style="text-align: center">반복 테스트에서 지정한 배열을 파라미터 값으로 순서대로 넘겨준다. (하나의 인수일 경우)</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@NullSource</td>
      <td style="text-align: center">Null로 값을 전달할 떄  사용한다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@EmptySource</td>
      <td style="text-align: center">빈 값을 인수로 전달할 때 사용한다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@NullAndEmptySource</td>
      <td style="text-align: center">Null, Empty 모두 전달할 때 사용</td>
      <td>@CsvSource</td>
      <td>테스트 입력값을 Csv로 구성하여 던질 떄 사용한다.</td>
    </tr>
    <tr>
      <td style="text-align: center">@EnumSource</td>
      <td style="text-align: center">열거형의 배열을 테스트 메소드에 전달</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@MethodSource</td>
      <td style="text-align: center">Arguments로 파라미터를 여러 개 전달할 떄 사용한다. (Arguments.of(value, value….))</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@RepeatedTest</td>
      <td style="text-align: center">메소드가 반복 테스트 메소드임을 나타낸다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@DisplayName</td>
      <td style="text-align: center">테스트 클래스 또는 메소드에 대한 사용자 지정 표시 이름</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@DisplayNameGeneration</td>
      <td style="text-align: center">테스트 클래스 이름 생성기를 선언한다. *</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@BeforeEach</td>
      <td style="text-align: center">@Test, @RepeatedTest, @ParameterizedTest, @TestFactor 전에 실행되는 것을 나타낸다. <br />테스트 마다 실행 전에 실행된다. <br /> 매 테스트마다 초기화해야 하는 경우 사용된다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@AfterEach</td>
      <td style="text-align: center">@Test, @RepeatedTest, @ParameterizedTest, @TestFactor 후에 실행되는 것을 나타낸다.  <br />테스트 마다 실행 후에 실행된다.     <br /> 매 테스트 후 정리해야 하는 경우 사용된다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@BeforeAll</td>
      <td style="text-align: center">@BeforeEach 와 유사하지만 <code class="language-plaintext highlighter-rouge">static</code> 메소드여야만 하며  테스트 전에 한 번만 실행된다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@AfterAll</td>
      <td style="text-align: center">@AfterEach 와 유사하지만 <code class="language-plaintext highlighter-rouge">static</code> 메소드여야만 하며  테스트 후에 한 번만 실행된다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@Nested</td>
      <td style="text-align: center">주석이 달린 클래스가 중첩 테스트 클래스임을 나타낸다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@Tag</td>
      <td style="text-align: center">클래스, 메소드 수준 테스트 필터링을 위해서 사용한다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@Disabled</td>
      <td style="text-align: center">테스트 클래스, 메소드를 비활성화할 때 사용한다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@Timeout</td>
      <td style="text-align: center">테스트 타임아웃을 지정한다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@ExtendWith</td>
      <td style="text-align: center">확장을 선언적으로 등록할 때 사용한다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@RegisterExtension</td>
      <td style="text-align: center">필드를 통해 프로그래밍 방식으로 확장을 등록할 떄 사용한다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@TempDir</td>
      <td style="text-align: center">테스트 메소드에서 필드 주입 또는 매개변수 주입을 통해 임시 디렉토리를 제공</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@TestFactory</td>
      <td style="text-align: center">동적 테스트를 위한 테스트 팩토리임을 나타낸다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@TestTemplate</td>
      <td style="text-align: center"> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@TestClassOrder</td>
      <td style="text-align: center">@Nested 간 실행 순서를 구성하는 데 사용한다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@TestMethodOrder</td>
      <td style="text-align: center">테스트 메소드간 순서를 구성하는 데 사용한다.                                               @</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@TestInstance</td>
      <td style="text-align: center">주석이 달린 테스트 클래스의 인스턴스 수명 주기를 구성하는데 사용한다.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">@Sql</td>
      <td style="text-align: center">sql 파일을 지정하여 Dao 단위 테스트에 미리 구성된 쿼리를 실행한다.</td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Junit</span> <span class="o">{</span>
    <span class="nd">@TestFactory</span>
    <span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">DynamicTest</span><span class="o">&gt;</span> <span class="nf">testFactory</span> <span class="o">()</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">7</span><span class="o">,</span><span class="mi">8</span><span class="o">,</span><span class="mi">9</span><span class="o">,</span><span class="mi">10</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">numbers</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                      <span class="o">.</span><span class="na">forEach</span><span class="o">(</span> <span class="n">num</span> <span class="o">-&gt;</span> <span class="n">dynamicTest</span><span class="o">(</span>
                              <span class="n">num</span><span class="o">,</span>
                              <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">assertThat</span><span class="o">(</span><span class="n">number</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">).</span><span class="na">isTrue</span><span class="o">()</span>
                      <span class="o">));</span>
    <span class="o">}</span>

    <span class="nd">@ParameterizedTest</span>
    <span class="nd">@ValueSource</span><span class="o">(</span><span class="n">ints</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">7</span><span class="o">,</span><span class="mi">8</span><span class="o">,</span><span class="mi">9</span><span class="o">,</span><span class="mi">10</span><span class="o">})</span>
    <span class="kd">public</span> <span class="nf">isUnderThen</span><span class="o">(</span><span class="kt">int</span> <span class="n">number</span><span class="o">){</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">number</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">).</span><span class="na">isTrue</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h2 id="spring-test-annotations">Spring Test Annotations</h2>

<h3 id="controller-test">Controller Test</h3>
<p>| Annotation                                                                                                                                                    |                                      Description                                      |
|:————————————————————————————————————————————————————–|:————————————————————————————-:|
| @SpringBootTest(<br />webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT,<br /> properties = “spring.profiles.active=[profile]”<br />)                  | SpringBootTest임을 알린다. 이 어노테이션이 붙으면 SpringContext를 실행하고 Component 스캔 등을 한다. (스프링을 켠다.) |
| @AutoConfigureMockMvc                                                                                                                                         |                                    서블릿 컨테이너를 모킹한다.                                    |
| @TestPropertySource                                                                                                                                           |     테스트 환경의 Property를 지정할 수 있다. (classpath:로 resource 내부에서 찾는건 덤 -&gt; build에서 찾는다.)     |
| @ActiveProfiles                                                                                                                                               |                               Active로 둘 Profile를 지정한다.                                |</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Object</th>
      <th style="text-align: center">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">@Autowired<br />MockMvc</td>
      <td style="text-align: center">테스트용 MVC환경을 만들어 요청, 전송, 응답을 제공하는 클래스</td>
    </tr>
    <tr>
      <td style="text-align: left">@LocalServerPort<br />int port</td>
      <td style="text-align: center">현재 mocking 혹은 지정된 포트를 반환한다. (RandomPort의 경우)</td>
    </tr>
  </tbody>
</table>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//ex)</span>

<span class="nd">@Test</span>
<span class="nd">@DisplayName</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"ContextLoadTest"</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">contextLoads</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ContextLoaded"</span><span class="o">);</span>

        <span class="c1">//given</span>
        <span class="nc">String</span> <span class="n">expect</span> <span class="o">=</span> <span class="s">"junitTest"</span><span class="o">;</span>

        <span class="c1">//when</span>
        <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span>
        <span class="n">get</span><span class="o">(</span><span class="s">"/v1/user/test"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
        <span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
        <span class="o">)</span>
        <span class="c1">//that</span>
        <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="nc">MockMvcResultMatchers</span><span class="o">.</span><span class="na">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
        <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">jsonPath</span><span class="o">(</span><span class="s">"$"</span><span class="o">,</span><span class="n">expect</span><span class="o">).</span><span class="na">exists</span><span class="o">());</span>

        <span class="o">}</span>

</code></pre></div></div>

<h3 id="servicetest">ServiceTest</h3>
<p>| Annotation  |                 Description                  |
|:————|:——————————————–:|
| @ExtendWith |        단위 테스트에 공통적으로 사용할 확장 기능을 선언한다.        |
| @Mock       |       Mock 객체를 생성 메소드는 있지만 내부 구현이 없다.        |
| @Spy        | 모든 기능을 가지고 있다. 다만 Stub을 하면 해당 부분만 Mocking된다. |
| @InjectMock |  @Mock, @Spy로 생산한 객체를 주입한다.(생성자 주입으로 추정된다.)  |</p>

<h3 id="repositorytest">RepositoryTest</h3>
<p>| Annotation                                                                                                                                          |                         Descpription                         |
|:—————————————————————————————————————————————————-|:————————————————————:|
| @DataJpaTest(<br />  showSql = true,<br />  properties = {“classpath:application.yml”},<br />  includeFilters = {}<br />) | SpringContext 중 Repository에 관련된 요소들만 테스트하기 위해서 사용하는 어노테이션이다. |
| @AutoConfigureTestDatabase(connection=””, replace=””)                                                                                               |    TestDB를 구성할 때 유용한 어노테이션이다. 테스트 시 DB를 테스트 DB로 대체할 수 있다.    |</p>
</section>
  

</article>

<!-- Disqus -->


<!-- Post navigation -->

  <div id="post-nav">
  
  <div id="previous-post" class="post-nav-post">
      <p>Previous post</p>
      <a href="/java/2024/05/18/java-series-23-ShellCommand.html">
        [java Series] 23  shellcommand
      </a>
  </div>
  
  
  <div id="next-post" class="post-nav-post">
      <p>Next post</p>
      <a href="/java/2024/05/18/java-series-26-Set.html">
        [java Series] 26 Set
      </a>
  </div>
  
</div>



    </div>
    
<script src="/assets/js/katex_init.js"></script>



<footer class="site-footer">
	<p class="text">Powered by <a href="https://jekyllrb.com/">Jekyll</a> with <a href="https://github.com/rohanchandra/type-theme">Type Theme</a>
</p>
</footer>


  </body>
</html>
