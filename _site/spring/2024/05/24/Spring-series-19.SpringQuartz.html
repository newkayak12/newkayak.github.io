<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>[spring Series] 19.springquartz | newkayak12.github.io</title>
	<meta name="description"
		content="from Dictionary - Quartz">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- CSS -->
	<link rel="stylesheet" href="/assets/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="/spring/2024/05/24/Spring-series-19.SpringQuartz.html">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="newkayak12.github.io"
		href="/feed.xml" />

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
		integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet"
		type="text/css">
	

	<!-- KaTeX -->
	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css"
		integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">

	<script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js"
		integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ"
		crossorigin="anonymous"></script>
	

	<!-- Google Analytics -->
	
</head>
  <body>
    <header class="site-header">
	<div class="branding">
		
		<a href="/">
			<img class="avatar" src="/assets/img/avatar.jpeg" alt=""/>
		</a>
		
		<h1 class="site-title">
			<a href="/">newkayak12.github.io</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			
			
			
			
			
			<li>
				<a class="page-link" href="/about/">
					About
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<!-- Social icons from Font Awesome, if enabled  -->
			


<li>
	<a href="mailto:newkayak12@gmail.com" title="Email">
		<i class="fas fa-fw fa-envelope"></i>
	</a>
</li>













<li>
	<a href="https://github.com/newkayak12" title="Follow on GitHub">
		<i class="fab fa-fw fa-github"></i>
	</a>
</li>































            <!-- Search bar -->
            
		</ul>
	</nav>

</header>

    <div class="content">
      <article >
  <header style="background-image: url('/')">
    <h1 class="title">[spring Series] 19.springquartz</h1>
    
    <p class="meta">
      May 24, 2024
      
    </p>
  </header>
  <section class="post-content"><p>from <a href="https://github.com/newkayak12/Dictionary/blob/master/spring/19.SpringQuartz.md">Dictionary - Quartz</a></p>

<h1 id="quartz">Quartz</h1>
<p>스케쥴링 라이브러리</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">용어</th>
      <th style="text-align: center">분류</th>
      <th style="text-align: center">설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Job</td>
      <td style="text-align: center">인터페이스</td>
      <td style="text-align: center">실행할 작업을 정의하는 인터페이스</td>
    </tr>
    <tr>
      <td style="text-align: center">JobDetail</td>
      <td style="text-align: center">인터페이스</td>
      <td style="text-align: center">실행될 작업을 정의하고 구성하는 인터페이스</td>
    </tr>
    <tr>
      <td style="text-align: center">JobBuilder</td>
      <td style="text-align: center">클래스</td>
      <td style="text-align: center">JobDetail 인스턴스를 생성하는데 사용되는 유틸리티 클래스</td>
    </tr>
    <tr>
      <td style="text-align: center">JobListener</td>
      <td style="text-align: center">인터페이스</td>
      <td style="text-align: center">작업의 생명 주기 동안 발생하는 이벤트를 처리하는 인터페이스</td>
    </tr>
    <tr>
      <td style="text-align: center">JobDataMap</td>
      <td style="text-align: center">클래스</td>
      <td style="text-align: center">작업 실행시 필요한 데이터를 저장하는 맵(자료구조)</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Trigger</td>
      <td style="text-align: center">인터페이스</td>
      <td style="text-align: center">작업의 실행 시간을 결정하는 인터페이스</td>
    </tr>
    <tr>
      <td style="text-align: center">CronTrigger</td>
      <td style="text-align: center">인터페이스</td>
      <td style="text-align: center">복잡한 실행 스케줄을 정의할 수 있는 Trigger 인터페이스</td>
    </tr>
    <tr>
      <td style="text-align: center">TriggerBuilder</td>
      <td style="text-align: center">클래스</td>
      <td style="text-align: center">Trigger 인스턴스를 생성하는데 사용되는 유틸리티 클래스</td>
    </tr>
    <tr>
      <td style="text-align: center">SimpleScheduleBuilder</td>
      <td style="text-align: center">클래스</td>
      <td style="text-align: center">간단한 실행 스케줄을 정의할 수 있는 클래스</td>
    </tr>
    <tr>
      <td style="text-align: center">CronScheduleBuilder</td>
      <td style="text-align: center">클래스</td>
      <td style="text-align: center">복잡한 실행 스케줄을 cron 표현식으로 정의할 수 있는 클래스</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Scheduler</td>
      <td style="text-align: center">인터페이스</td>
      <td style="text-align: center">작업과 트리거를 관리하고 실행하는 인터페이스</td>
    </tr>
    <tr>
      <td style="text-align: center">SchedulerFactory</td>
      <td style="text-align: center">클래스</td>
      <td style="text-align: center">Scheduler 인스턴스를 생성하는 클래스</td>
    </tr>
  </tbody>
</table>

<h2 id="listener">Listener</h2>

<h3 id="trigger">Trigger</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">QuartzTriggerListener</span> <span class="kd">implements</span> <span class="nc">TriggerListener</span> <span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">"QuartzTriggerListener"</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">triggerFired</span><span class="o">(</span><span class="nc">Trigger</span> <span class="n">trigger</span><span class="o">,</span> <span class="nc">JobExecutionContext</span> <span class="n">jobExecutionContext</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">" triggerFired [{}] {}"</span><span class="o">,</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getGroup</span><span class="o">(),</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span>  <span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">vetoJobExecution</span><span class="o">(</span><span class="nc">Trigger</span> <span class="n">trigger</span><span class="o">,</span> <span class="nc">JobExecutionContext</span> <span class="n">jobExecutionContext</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">" vetoJobExecution [{}] {}"</span><span class="o">,</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getGroup</span><span class="o">(),</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span>  <span class="o">);</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">triggerMisfired</span><span class="o">(</span><span class="nc">Trigger</span> <span class="n">trigger</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">" triggerMisfired [{}] {}"</span><span class="o">,</span> <span class="n">trigger</span><span class="o">.</span><span class="na">getJobKey</span><span class="o">().</span><span class="na">getGroup</span><span class="o">(),</span> <span class="n">trigger</span><span class="o">.</span><span class="na">getJobKey</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>

        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">triggerComplete</span><span class="o">(</span><span class="nc">Trigger</span> <span class="n">trigger</span><span class="o">,</span> <span class="nc">JobExecutionContext</span> <span class="n">jobExecutionContext</span><span class="o">,</span> <span class="nc">Trigger</span><span class="o">.</span><span class="na">CompletedExecutionInstruction</span> <span class="n">completedExecutionInstruction</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">" triggerComplete [{}] {}"</span><span class="o">,</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getGroup</span><span class="o">(),</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span>  <span class="o">);</span>

        <span class="o">}</span>
    <span class="o">}</span>

</code></pre></div></div>
<h3 id="job">Job</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">QuartzJobListener</span> <span class="kd">implements</span> <span class="nc">JobListener</span> <span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">"QuartzJobListener"</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">jobToBeExecuted</span><span class="o">(</span><span class="nc">JobExecutionContext</span> <span class="n">jobExecutionContext</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">" jobToBeExecuted [{}] {}"</span><span class="o">,</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getGroup</span><span class="o">(),</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span>  <span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">jobExecutionVetoed</span><span class="o">(</span><span class="nc">JobExecutionContext</span> <span class="n">jobExecutionContext</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">" jobExecutionVetoed [{}] {}"</span><span class="o">,</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getGroup</span><span class="o">(),</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span>  <span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">jobWasExecuted</span><span class="o">(</span><span class="nc">JobExecutionContext</span> <span class="n">jobExecutionContext</span><span class="o">,</span> <span class="nc">JobExecutionException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">" jobWasExecuted [{}] {}"</span><span class="o">,</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getGroup</span><span class="o">(),</span> <span class="n">jobExecutionContext</span><span class="o">.</span><span class="na">getJobDetail</span><span class="o">().</span><span class="na">getKey</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span>  <span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>

<h2 id="cronexpression">CronExpression</h2>
<blockquote>
  <p><code class="language-plaintext highlighter-rouge">＊ ＊ ＊ ＊ ＊ ?</code></p>
</blockquote>

<ul>
  <li>가장 앞에 오는 단위는 초 (Seconds) 이다.</li>
  <li>두번 째는 분 (Minutes) 을 나타낸다.</li>
  <li>세번 째는 시 (Hours) 를 나타낸다.</li>
  <li>네번 째는 일 (Day-of-Month, DOM) 을 나타낸다.</li>
  <li>다섯번 째로 월 (Month) 에 대한 정보를 기술한다.</li>
  <li>여섯번 째는 요일 (Day of Week) 을 나타낸다. 요일은 0~6 의 숫자로 쓸 수도 있지만 “MON”, “SUN” 과 같이 요일의 약자로 사용할 수도 있다.</li>
  <li>
    <p>마지막은 연도 (Year) 가 온다. 연도는 optional 이다.</p>
  </li>
  <li>와일드카드 (*) 문자는 “매 번” 을 의미한다</li>
  <li>물음표 (?) 는 ‘설정값 없음’ 을 나타낸다. 이는 일 (DOM) 과 요일 (DOW) 에만 사용할 수 있다.</li>
  <li>슬래쉬 (/) 는 값 증가 표현에 사용된다. 분 (Minutes) 항목에 “10/15” 라고 쓴다면, “10분 부터 시작해서 매 15분 마다” 를 의미한다.</li>
  <li>샾 (#) 은 k#N 으로 사용되며, 이 달의 N번째 K요일을 의미한다. 요일 (DOW) 항목에 “5#2” 라고 적는다면, “이 달의 두번째 목요일” 을 뜻한다.</li>
  <li>문자 “L” 은 마지막 (Last) 를 의미한다. L 은 일 (DOM) 과 요일 (DOW) 에만 사용할 수 있다. 예를 들어 일 (DOM) 항목에 L 이 사용된다면 단순하게 해당 월의 마지막 날을 의미한다. 조금 다른 방법으로도 사용되는데, 특정 값 뒤에 사용된다면 “이 달의 마지막 날”을 의미하게 된다. 예를 들어 요일에 “6L” 을 준다면, “이 달의 마지막 금요일” 을 의미하게 된다.</li>
  <li>문자 “W” 는 해당 날로부터 가장 가까운 평일 (Weekday) 을 의미한다. 예를 들어 일 (DOM) 항목에 “10W” 라고 준다면, “이 달의 10째 날로부터 가장 가까운 평일” 을 의미한다.</li>
  <li>각각의 단위는 범위나 목록으로 나타낼 수도 있다. 일 (DOM) 에 “1-15” 라고 적는다면 1일부터 15일까지를 뜻한다.</li>
  <li>각각의 항목은 항목에 유효한 값만이 들어올 수 있다. 예를 들어 일은 1 ~ 31 사이의 숫자만 허용되고, 시간은 0 ~ 23 사이의 시간만 허용한다.</li>
</ul>

<h3 id="ex">ex</h3>
<ul>
  <li>“0 0/5 * * * ?” : 매 시 5분마다 수행</li>
  <li>“10 0/5 * * * ?” : 10초 뒤 5분마다 수행</li>
  <li>“0 30 10-13 ? * WED,FRI” : 매 주 수요일과 금요일 10시 ~ 13시 30분에 수행</li>
  <li>“0 0/30 8-9 5,20 * ?” : 매 월 5일과 20일에 8시 ~ 9시대에 30분 간격으로 수행 (ex. 8:00, 8:30, 9:00, 9:30 에 수행)</li>
</ul>
</section>
  

</article>

<!-- Disqus -->


<!-- Post navigation -->

  <div id="post-nav">
  
  <div id="previous-post" class="post-nav-post">
      <p>Previous post</p>
      <a href="/spring/2024/05/24/Spring-series-18.SpringBatch.html">
        [spring Series] 18.springbatch
      </a>
  </div>
  
  
  <div id="next-post" class="post-nav-post">
      <p>Next post</p>
      <a href="/spring/2024/05/24/Spring-series-20.Quartz+Batch.html">
        [spring Series] 20.quartz+batch
      </a>
  </div>
  
</div>



    </div>
    
<script src="/assets/js/katex_init.js"></script>



<footer class="site-footer">
	<p class="text">Powered by <a href="https://jekyllrb.com/">Jekyll</a> with <a href="https://github.com/rohanchandra/type-theme">Type Theme</a>
</p>
</footer>


  </body>
</html>
